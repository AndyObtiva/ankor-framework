{% extends "base.html" %}

{% block title %}Examples{% endblock %}

{% block content %}
{% load staticfiles %}

<div class="row">
    <div class="span3">
        {% include "tutorial/tutorial_fx_menu.html" %}
    </div><!--/span-->
    <div class="span9">
        {% include "tutorial/tutorial_fx_head.html" with tutorial_title='First Application' %}

        <h4>The Application</h4>
        <p>Let's start with a simple Ankor Application. A JavaFX Client connects to our Ankor Server and displays
            a list of phone models. This tutorial will explain how to setup the application, write your first
            View Model and bind the model to your UI components.

        <h4>Boot the Application</h4>
        <p>The initial load of both client and server is done by a Boot class.
            See the following code snippets for details.</p>
        <ul class="nav nav-tabs">
            <li class="active" ><a href="#tab1" data-toggle="tab">Boot.class</a></li>
            <li><a href="#tab2" data-toggle="tab">PhonecatServer.class</a></li>
            <li><a href="#tab3" data-toggle="tab">PhonecatClient.class</a></li>
        </ul>
        <div class="tab-content">
            <div class="tab-pane active" id="tab1">
        <pre class="prettyprint">
/**
 * Utility to start JavaFX Client and Ankor Server
 */
public class Boot {

    public static void main(String... args) throws ClassNotFoundException {
        new PhonecatServer().startServer(); // start server thread
        new PhonecatClient().startClient(); // start client thread
    }
}
        </pre>
            </div>
            <div class="tab-pane" id="tab2">
<pre class="prettyprint">
/**
 * Start Ankor Server
 */
public class PhonecatServer {

    // A simple repository which we load Phone Models from
    private PhoneRepository phoneRepository;

    public void startServer() {
        phoneRepository = new PhoneRepository();

        // Start the AnkorServer
        new SocketAnkorSystemStarter()
                .withModelRootFactory(new MyModelRootFactory())
                .withLocalHost(new SocketMessageLoop.Host("server", "localhost", 9090))
                .createAndStartServerSystem(false);
    }

    /**
     * Factory to create our Phonecat specific ModelRoot instance
     */
    private class MyModelRootFactory implements ModelRootFactory {
        public Object createModelRoot(Ref rootRef) {
            return new ModelRoot(rootRef, phoneRepository);
        }
    }
}
</pre>
            </div>
            <div class="tab-pane" id="tab3">
        <pre class="prettyprint">
/**
 * Start Client AnkorSystem and launch JavaFX UI
 */
public class PhonecatClient extends javafx.application.Application {
    public void startClient() {
        // Setup local AnkorSystem and connect to remote AnkorServer
        SocketAnkorSystemStarter appBuilder = new SocketAnkorSystemStarter()
                .withModelRootFactory(new MyModelRootFactory())
                .withLocalHost(new SocketMessageLoop.Host("client", "localhost", 9091))
                .withServerHost(new SocketMessageLoop.Host("server", "localhost", 9090));
        // Store the RefFactory to static instance variable
        // Use the RefFactory to get access to View Model Data
        REF_FACTORY = appBuilder.createAndStartClientSystem();
        launch(); // Launch JavaFX client
    }

    private static RefFactory REF_FACTORY;

}
        </pre>
            </div>
        </div><!--/tab-content-->
    </div><!--/span9-->
</div><!--/row-->

{% endblock %}
